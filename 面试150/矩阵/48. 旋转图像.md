[48. 旋转图像](https://leetcode.cn/problems/rotate-image/description/?envType=study-plan-v2&envId=top-interview-150)

<img width="689" height="720" alt="image" src="https://github.com/user-attachments/assets/55782f62-f9c0-4241-a932-5feaf7bcafaa" />

# 寻找规律
根据示例：
+ 找出参考的i行：一行顺时针旋转以后会变`n-1-i`列。一行中的第j个元素，变道列中依旧是第j个，只是原来的j是列，现在的j是行，即`matrix[i][j] = matrix[j][n-1-i]`
+ 同理，找出参考的j列，一列顺时针旋转以后j行，只是其中的第i个元素，会变成`n-1-i`个元素，即`matrix[i][j] = matrix[j][n-1-i]`

因此可以使用辅助数组，按照行或列进行旋转。
```cpp
class Solution {
public:
    void rotate(vector<vector<int>>& matrix) {
        int n = matrix.size();
        // C++ 这里的 = 拷贝是值拷贝，会得到一个新的数组
        auto matrix_new = matrix;
        for (int i = 0; i < n; ++i) {
            for (int j = 0; j < n; ++j) {
                matrix[j][n - i - 1] = matrix_new[i][j];
            }
        }   
    }
};
```

# 旋转遍历
题目要求是原地操作，即不需要额外的空间。 因此按照上面得出的规律，遍历matrix的时候，将元素移动到对应的位置。 这里有两个问题：
+ 元素移动以后，新位置元素被覆盖，如何处理？————4个元素为一个循环，仅需要一个temp

  + `matrix[i][j]`移动到`matrix[j][n-1-i]`；
  + 上述操作会覆盖`matrix[j][n-1-i]`，因此要将这个元素移动到对应位置，规律一致，新位置是`matrix[n-1-i][n-1-j]`；
  + 同上，`matrix[n-1-i][n-1-j]`移动的位置是`matrix[n-1-j][i]`；
  + 同上，`matrix[n-1-j][i]`移动的位置是`matrix[i][j]`。

+ 需要遍历多少个元素？————**分块 or 洋葱圈**
  + **分块**：四个元素为循环，那么将整个matrix分成四个大的块，四个大的块的元素进行交换。
    <img width="334" height="177" alt="image" src="https://github.com/user-attachments/assets/92720ad1-3240-4ae9-be58-c370c4869f82" />

```cpp
class Solution {
public:
    void rotate(vector<vector<int>>& matrix) {
        int n = matrix.size();
        for (int i = 0; i < n / 2; ++i) {
            // 分块处理
            for (int j = 0; j < (n + 1) / 2; ++j) {
                int temp = matrix[i][j];
                matrix[i][j] = matrix[n - j - 1][i];
                matrix[n - j - 1][i] = matrix[n - i - 1][n - j - 1];
                matrix[n - i - 1][n - j - 1] = matrix[j][n - i - 1];
                matrix[j][n - i - 1] = temp;
            }
        }
    }
};
``

  + **洋葱圈**：即将一个matrix四周一圈分为一个循环，需要遍历`n/2`个圈。【n为偶数的话，最里面的圈就四个数，参考n=2； n为基数的话，最里面只剩一个数字，不需要处理，参考n=3】
    洋葱圈内层循环，是每次要处理那些元素？ 见下图，内层循环是`j = i`直到`j < n - i - 1`。

    <img width="368" height="177" alt="image" src="https://github.com/user-attachments/assets/b0cdded7-5ee1-46e0-81cd-76fd954d7b40" />

```cpp
class Solution {
public:
    void rotate(vector<vector<int>>& matrix) {
        int n = matrix.size();
        for (int i = 0; i < n / 2; ++i) {
            // 洋葱圈处理
            for (int j = i; j < n - 1 - i; ++j) {
                int temp = matrix[i][j];
                matrix[i][j] = matrix[n - j - 1][i];
                matrix[n - j - 1][i] = matrix[n - i - 1][n - j - 1];
                matrix[n - i - 1][n - j - 1] = matrix[j][n - i - 1];
                matrix[j][n - i - 1] = temp;
            }
        }
    }
};
    
```



# 巧用转置
## 顺时针旋转


## 逆时针旋转

